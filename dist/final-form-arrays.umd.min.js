!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self)["final-form-arrays"]={})}(this,function(t){"use strict";function b(){return(b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function d(t,e,r,n){void 0===n&&(n=t),delete t.fields[e.name],t.fields[r]=b({},e,{name:r,change:n.fields[r]&&n.fields[r].change,blur:n.fields[r]&&n.fields[r].blur,focus:n.fields[r]&&n.fields[r].focus,lastFieldState:void 0}),t.fields[r].change||delete t.fields[r].change,t.fields[r].blur||delete t.fields[r].blur,t.fields[r].focus||delete t.fields[r].focus}function h(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(){this.__data__=[],this.size=0}var o=function(t,e){return t===e||t!=t&&e!=e};var a=function(t,e){for(var r=t.length;r--;)if(o(t[r][0],e))return r;return-1},n=Array.prototype.splice;function r(t){var e=this.__data__,r=a(e,t);return!(r<0)&&(r==e.length-1?e.pop():n.call(e,r,1),--this.size,!0)}function c(t){var e=this.__data__,r=a(e,t);return r<0?void 0:e[r][1]}function i(t){return-1<a(this.__data__,t)}function u(t,e){var r=this.__data__,n=a(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function f(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}f.prototype.clear=e,f.prototype.delete=r,f.prototype.get=c,f.prototype.has=i,f.prototype.set=u;var s=f;function l(){this.__data__=new s,this.size=0}function v(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function p(t){return this.__data__.get(t)}function y(t){return this.__data__.has(t)}var j="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _(t,e){return t(e={exports:{}},e.exports),e.exports}var g="object"==typeof j&&j&&j.Object===Object&&j,O="object"==typeof self&&self&&self.Object===Object&&self,w=g||O||Function("return this")(),m=w.Symbol,A=Object.prototype,x=A.hasOwnProperty,S=A.toString,E=m?m.toStringTag:void 0;var P=function(t){var e=x.call(t,E),r=t[E];try{var n=!(t[E]=void 0)}catch(t){}var o=S.call(t);return n&&(e?t[E]=r:delete t[E]),o},z=Object.prototype.toString;var F=function(t){return z.call(t)},I=m?m.toStringTag:void 0;var U=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":I&&I in Object(t)?P(t):F(t)};var V=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var k,M=function(t){if(!V(t))return!1;var e=U(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},T=w["__core-js_shared__"],B=(k=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"";var $=function(t){return!!B&&B in t},R=Function.prototype.toString;var D=function(t){if(null!=t){try{return R.call(t)}catch(t){}try{return t+""}catch(t){}}return""},N=/^\[object .+?Constructor\]$/,C=Function.prototype,W=Object.prototype,L=C.toString,q=W.hasOwnProperty,G=RegExp("^"+L.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var H=function(t){return!(!V(t)||$(t))&&(M(t)?G:N).test(D(t))};var J=function(t,e){return null==t?void 0:t[e]};var K=function(t,e){var r=J(t,e);return H(r)?r:void 0},Q=K(w,"Map"),X=K(Object,"create");function Y(){this.__data__=X?X(null):{},this.size=0}function Z(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var tt=Object.prototype.hasOwnProperty;function et(t){var e=this.__data__;if(X){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return tt.call(e,t)?e[t]:void 0}var rt=Object.prototype.hasOwnProperty;function nt(t){var e=this.__data__;return X?void 0!==e[t]:rt.call(e,t)}function ot(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=X&&void 0===e?"__lodash_hash_undefined__":e,this}function at(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}at.prototype.clear=Y,at.prototype.delete=Z,at.prototype.get=et,at.prototype.has=nt,at.prototype.set=ot;var ct=at;var it=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var ut=function(t,e){var r=t.__data__;return it(e)?r["string"==typeof e?"string":"hash"]:r.map};function ft(t){var e=ut(this,t).delete(t);return this.size-=e?1:0,e}function st(t){return ut(this,t).get(t)}function lt(t){return ut(this,t).has(t)}function vt(t,e){var r=ut(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function pt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}pt.prototype.clear=function(){this.size=0,this.__data__={hash:new ct,map:new(Q||s),string:new ct}},pt.prototype.delete=ft,pt.prototype.get=st,pt.prototype.has=lt,pt.prototype.set=vt;var bt=pt;function dt(t,e){var r=this.__data__;if(r instanceof s){var n=r.__data__;if(!Q||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new bt(n)}return r.set(t,e),this.size=r.size,this}function ht(t){var e=this.__data__=new s(t);this.size=e.size}ht.prototype.clear=l,ht.prototype.delete=v,ht.prototype.get=p,ht.prototype.has=y,ht.prototype.set=dt;var yt=ht;var jt=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},_t=function(){try{var t=K(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var gt=function(t,e,r){"__proto__"==e&&_t?_t(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Ot=Object.prototype.hasOwnProperty;var wt=function(t,e,r){var n=t[e];Ot.call(t,e)&&o(n,r)&&(void 0!==r||e in t)||gt(t,e,r)};var mt=function(t,e,r,n){var o=!r;r=r||{};for(var a=-1,c=e.length;++a<c;){var i=e[a],u=n?n(r[i],t[i],i,r,t):void 0;void 0===u&&(u=t[i]),o?gt(r,i,u):wt(r,i,u)}return r};var At=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var xt=function(t){return null!=t&&"object"==typeof t};var St=function(t){return xt(t)&&"[object Arguments]"==U(t)},Et=Object.prototype,Pt=Et.hasOwnProperty,zt=Et.propertyIsEnumerable,Ft=St(function(){return arguments}())?St:function(t){return xt(t)&&Pt.call(t,"callee")&&!zt.call(t,"callee")},It=Array.isArray;function Ut(){return!1}var Vt=_(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?w.Buffer:void 0,a=(o?o.isBuffer:void 0)||Ut;t.exports=a}),kt=/^(?:0|[1-9]\d*)$/;var Mt=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&kt.test(t))&&-1<t&&t%1==0&&t<e};var Tt=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},Bt={};Bt["[object Float32Array]"]=Bt["[object Float64Array]"]=Bt["[object Int8Array]"]=Bt["[object Int16Array]"]=Bt["[object Int32Array]"]=Bt["[object Uint8Array]"]=Bt["[object Uint8ClampedArray]"]=Bt["[object Uint16Array]"]=Bt["[object Uint32Array]"]=!0,Bt["[object Arguments]"]=Bt["[object Array]"]=Bt["[object ArrayBuffer]"]=Bt["[object Boolean]"]=Bt["[object DataView]"]=Bt["[object Date]"]=Bt["[object Error]"]=Bt["[object Function]"]=Bt["[object Map]"]=Bt["[object Number]"]=Bt["[object Object]"]=Bt["[object RegExp]"]=Bt["[object Set]"]=Bt["[object String]"]=Bt["[object WeakMap]"]=!1;function $t(t){return xt(t)&&Tt(t.length)&&!!Bt[U(t)]}var Rt=function(e){return function(t){return e(t)}},Dt=_(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&g.process,a=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a}),Nt=Dt&&Dt.isTypedArray,Ct=Nt?Rt(Nt):$t,Wt=Object.prototype.hasOwnProperty;var Lt=function(t,e){var r=It(t),n=!r&&Ft(t),o=!r&&!n&&Vt(t),a=!r&&!n&&!o&&Ct(t),c=r||n||o||a,i=c?At(t.length,String):[],u=i.length;for(var f in t)!e&&!Wt.call(t,f)||c&&("length"==f||o&&("offset"==f||"parent"==f)||a&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Mt(f,u))||i.push(f);return i},qt=Object.prototype;var Gt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||qt)};var Ht=function(e,r){return function(t){return e(r(t))}},Jt=Ht(Object.keys,Object),Kt=Object.prototype.hasOwnProperty;var Qt=function(t){if(!Gt(t))return Jt(t);var e=[];for(var r in Object(t))Kt.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Xt=function(t){return null!=t&&Tt(t.length)&&!M(t)};var Yt=function(t){return Xt(t)?Lt(t):Qt(t)};var Zt=function(t,e){return t&&mt(e,Yt(e),t)};var te=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},ee=Object.prototype.hasOwnProperty;var re=function(t){if(!V(t))return te(t);var e=Gt(t),r=[];for(var n in t)("constructor"!=n||!e&&ee.call(t,n))&&r.push(n);return r};var ne=function(t){return Xt(t)?Lt(t,!0):re(t)};var oe=function(t,e){return t&&mt(e,ne(e),t)},ae=_(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?w.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=a?a(r):new t.constructor(r);return t.copy(n),n}});var ce=function(t,e){var r=-1,n=t.length;for(e=e||Array(n);++r<n;)e[r]=t[r];return e};var ie=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,a=[];++r<n;){var c=t[r];e(c,r,t)&&(a[o++]=c)}return a};function ue(){return[]}var fe=Object.prototype.propertyIsEnumerable,se=Object.getOwnPropertySymbols,le=se?function(e){return null==e?[]:(e=Object(e),ie(se(e),function(t){return fe.call(e,t)}))}:ue;var ve=function(t,e){return mt(t,le(t),e)};var pe=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},be=Ht(Object.getPrototypeOf,Object),de=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)pe(e,le(t)),t=be(t);return e}:ue;var he=function(t,e){return mt(t,de(t),e)};var ye=function(t,e,r){var n=e(t);return It(t)?n:pe(n,r(t))};var je=function(t){return ye(t,Yt,le)};var _e=function(t){return ye(t,ne,de)},ge=K(w,"DataView"),Oe=K(w,"Promise"),we=K(w,"Set"),me=K(w,"WeakMap"),Ae="[object Map]",xe="[object Promise]",Se="[object Set]",Ee="[object WeakMap]",Pe="[object DataView]",ze=D(ge),Fe=D(Q),Ie=D(Oe),Ue=D(we),Ve=D(me),ke=U;(ge&&ke(new ge(new ArrayBuffer(1)))!=Pe||Q&&ke(new Q)!=Ae||Oe&&ke(Oe.resolve())!=xe||we&&ke(new we)!=Se||me&&ke(new me)!=Ee)&&(ke=function(t){var e=U(t),r="[object Object]"==e?t.constructor:void 0,n=r?D(r):"";if(n)switch(n){case ze:return Pe;case Fe:return Ae;case Ie:return xe;case Ue:return Se;case Ve:return Ee}return e});var Me=ke,Te=Object.prototype.hasOwnProperty;var Be=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Te.call(t,"index")&&(r.index=t.index,r.input=t.input),r},$e=w.Uint8Array;var Re=function(t){var e=new t.constructor(t.byteLength);return new $e(e).set(new $e(t)),e};var De=function(t,e){var r=e?Re(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Ne=/\w*$/;var Ce=function(t){var e=new t.constructor(t.source,Ne.exec(t));return e.lastIndex=t.lastIndex,e},We=m?m.prototype:void 0,Le=We?We.valueOf:void 0;var qe=function(t){return Le?Object(Le.call(t)):{}};var Ge=function(t,e){var r=e?Re(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var He=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return Re(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return De(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ge(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Ce(t);case"[object Set]":return new n;case"[object Symbol]":return qe(t)}},Je=Object.create;function Ke(){}var Qe=function(t){if(!V(t))return{};if(Je)return Je(t);Ke.prototype=t;var e=new Ke;return Ke.prototype=void 0,e};var Xe=function(t){return"function"!=typeof t.constructor||Gt(t)?{}:Qe(be(t))};function Ye(t){return xt(t)&&"[object Map]"==Me(t)}var Ze=Dt&&Dt.isMap,tr=Ze?Rt(Ze):Ye;function er(t){return xt(t)&&"[object Set]"==Me(t)}var rr=Dt&&Dt.isSet,nr=rr?Rt(rr):er,or=1,ar=2,cr=4,ir="[object Arguments]",ur="[object Function]",fr="[object GeneratorFunction]",sr="[object Object]",lr={};lr[ir]=lr["[object Array]"]=lr["[object ArrayBuffer]"]=lr["[object DataView]"]=lr["[object Boolean]"]=lr["[object Date]"]=lr["[object Float32Array]"]=lr["[object Float64Array]"]=lr["[object Int8Array]"]=lr["[object Int16Array]"]=lr["[object Int32Array]"]=lr["[object Map]"]=lr["[object Number]"]=lr[sr]=lr["[object RegExp]"]=lr["[object Set]"]=lr["[object String]"]=lr["[object Symbol]"]=lr["[object Uint8Array]"]=lr["[object Uint8ClampedArray]"]=lr["[object Uint16Array]"]=lr["[object Uint32Array]"]=!0,lr["[object Error]"]=lr[ur]=lr["[object WeakMap]"]=!1;var vr=function r(n,o,a,t,e,c){var i,u=o&or,f=o&ar,s=o&cr;if(a&&(i=e?a(n,t,e,c):a(n)),void 0!==i)return i;if(!V(n))return n;var l=It(n);if(l){if(i=Be(n),!u)return ce(n,i)}else{var v=Me(n),p=v==ur||v==fr;if(Vt(n))return ae(n,u);if(v==sr||v==ir||p&&!e){if(i=f||p?{}:Xe(n),!u)return f?he(n,oe(i,n)):ve(n,Zt(i,n))}else{if(!lr[v])return e?n:{};i=He(n,v,u)}}var b=(c=c||new yt).get(n);if(b)return b;c.set(n,i),nr(n)?n.forEach(function(t){i.add(r(t,o,a,t,n,c))}):tr(n)&&n.forEach(function(t,e){i.set(e,r(t,o,a,e,n,c))});var d=l?void 0:(s?f?_e:je:f?ne:Yt)(n);return jt(d||n,function(t,e){d&&(t=n[e=t]),wt(i,e,r(t,o,a,e,n,c))}),i};function pr(t,o,e){var a=t[0],c=t[1],r=t[2],n=e.changeValue;e.resetFieldState,n(o,a,function(t){var e=[].concat(t||[]);return e.splice(c,0,r),e});var i=br(o.fields),u=new RegExp("^"+h(a)+"\\[(\\d+)\\](.*)");Object.keys(o.fields).sort().reverse().forEach(function(t){var e=u.exec(t);if(e){var r=Number(e[1]);if(c<=r){var n=a+"["+(r+1)+"]"+e[2];d(o,i[t],n)}}})}var br=function(t){return vr(t,5)};function dr(n,o,a,c){Object.keys(c.fields).forEach(function(t){if(t.substring(0,o.length)===o){var e=t.substring(o.length),r=n+"["+a+"]"+e;d(c,c.fields[t],r)}})}function hr(e,r){Object.keys(e.fields).forEach(function(t){e.fields[t]=b({},e.fields[t],{change:e.fields[t].change||r.fields[t]&&r.fields[t].change,blur:e.fields[t].blur||r.fields[t]&&r.fields[t].blur,focus:e.fields[t].focus||r.fields[t]&&r.fields[t].focus}),e.fields[t].change||delete e.fields[t].change,e.fields[t].blur||delete e.fields[t].blur,e.fields[t].focus||delete e.fields[t].focus})}function yr(t,c,e){var r,i=t[0],u=t[1],n=e.changeValue,f=e.renameField,s=e.getIn,l=e.setIn;n(c,i,function(t){var e=[].concat(t||[]);return r=e[u],e.splice(u,1),e});var v=new RegExp("^"+h(i)+"\\[(\\d+)\\](.*)"),p=b({},c,{fields:b({},c.fields)});return Object.keys(c.fields).forEach(function(t){var e=v.exec(t);if(e){var r=Number(e[1]);if(r===u){if(delete c.fields[t],t===i+"["+u+"]"){var n="formState.submitErrors."+i,o=s(c,n);Array.isArray(o)&&(o.splice(u,1),c=l(c,n,o))}}else if(u<r){delete c.fields[t];var a=i+"["+(r-1)+"]"+e[2];p.fields[a]?d(c,p.fields[t],a,p):f(c,t,a)}}}),r}var jr={insert:pr,concat:function(t,e,r){var n=t[0],o=t[1];(0,r.changeValue)(e,n,function(t){return t?[].concat(t,o):o})},move:function(t,e,r){var n=t[0],o=t[1],a=t[2],c=r.changeValue;if(o!==a){c(e,n,function(t){var e=[].concat(t||[]),r=e[o];return e.splice(o,1),e.splice(a,0,r),e});var i=b({},e,{fields:b({},e.fields)});if(dr(n,n+"["+o+"]","tmp",e),o<a)for(var u=o+1;u<=a;u++){dr(n,n+"["+u+"]",""+(u-1),e)}else for(var f=o-1;a<=f;f--){dr(n,n+"["+f+"]",""+(f+1),e)}dr(n,n+"[tmp]",a,e),hr(e,i)}},pop:function(t,e,r){var n,o,a=t[0];if((0,r.changeValue)(e,a,function(t){if(t)return t.length?(o=t.length-1,n=t[o],t.slice(0,o)):[]}),void 0!==o){var c=new RegExp("^"+h(a)+"\\["+o+"].*");Object.keys(e.fields).forEach(function(t){c.test(t)&&delete e.fields[t]})}return n},push:function(t,e,r){var n=t[0],o=t[1];(0,r.changeValue)(e,n,function(t){return t?[].concat(t,[o]):[o]})},remove:yr,removeBatch:function(t,o,e){var a=t[0],c=t[1],r=e.changeValue,i=[].concat(c);i.sort();for(var n=0;n<i.length;n++)0<n&&i[n]===i[n-1]&&i.splice(n--,1);var u=[];r(o,a,function(e){if(u=c.map(function(t){return e&&e[t]}),!e||!i.length)return e;var r=[].concat(e),n=[];return i.forEach(function(t){r.splice(t-n.length,1),n.push(e&&e[t])}),r});var f=new RegExp("^"+h(a)+"\\[(\\d+)\\](.*)"),s=b({},o,{fields:{}});return Object.keys(o.fields).forEach(function(t){var e=f.exec(t);if(e){var r=Number(e[1]);if(!~i.indexOf(r)){var n=a+"["+(r-function(t,r){return t.reduce(function(t,e){return e<r?t+1:t},0)}(i,r))+"]"+e[2];d(s,o.fields[t],n,o)}}else s.fields[t]=o.fields[t]}),o.fields=s.fields,u},shift:function(t,e,r){var n=t[0];return yr([n,0],e,r)},swap:function(t,e,r){var n=t[0],o=t[1],a=t[2],c=r.changeValue;if(o!==a){c(e,n,function(t){var e=[].concat(t||[]),r=e[o];return e[o]=e[a],e[a]=r,e});var i=b({},e,{fields:b({},e.fields)}),u=n+"["+a+"]",f=n+"[tmp]";dr(n,n+"["+o+"]","tmp",e),dr(n,u,o,e),dr(n,f,a,e),hr(e,i)}},unshift:function(t,e,r){var n=t[0],o=t[1];return pr([n,0,o],e,r)},update:function(t,e,r){var n=t[0],o=t[1],a=t[2];(0,r.changeValue)(e,n,function(t){var e=[].concat(t||[]);return e.splice(o,1,a),e})}};t.default=jr,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=final-form-arrays.umd.min.js.map
