!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self)["final-form-arrays"]={})}(this,function(e){"use strict";function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t,r,n){void 0===n&&(n=e),console.log("state, source and dest",e,t,r),delete e.fields[t.name],e.fields[r]=b({},t,{name:r,change:n.fields[r]&&n.fields[r].change,blur:n.fields[r]&&n.fields[r].blur,focus:n.fields[r]&&n.fields[r].focus,lastFieldState:void 0}),e.fields[r].change||delete e.fields[r].change,e.fields[r].blur||delete e.fields[r].blur,e.fields[r].focus||delete e.fields[r].focus}function h(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(){this.__data__=[],this.size=0}var o=function(e,t){return e===t||e!=e&&t!=t};var a=function(e,t){for(var r=e.length;r--;)if(o(e[r][0],t))return r;return-1},n=Array.prototype.splice;function r(e){var t=this.__data__,r=a(t,e);return!(r<0)&&(r==t.length-1?t.pop():n.call(t,r,1),--this.size,!0)}function c(e){var t=this.__data__,r=a(t,e);return r<0?void 0:t[r][1]}function i(e){return-1<a(this.__data__,e)}function u(e,t){var r=this.__data__,n=a(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function f(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}f.prototype.clear=t,f.prototype.delete=r,f.prototype.get=c,f.prototype.has=i,f.prototype.set=u;var s=f;function l(){this.__data__=new s,this.size=0}function v(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function p(e){return this.__data__.get(e)}function y(e){return this.__data__.has(e)}var j="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _(e,t){return e(t={exports:{}},t.exports),t.exports}var g="object"==typeof j&&j&&j.Object===Object&&j,O="object"==typeof self&&self&&self.Object===Object&&self,w=g||O||Function("return this")(),m=w.Symbol,A=Object.prototype,x=A.hasOwnProperty,S=A.toString,E=m?m.toStringTag:void 0;var P=function(e){var t=x.call(e,E),r=e[E];try{var n=!(e[E]=void 0)}catch(e){}var o=S.call(e);return n&&(t?e[E]=r:delete e[E]),o},z=Object.prototype.toString;var F=function(e){return z.call(e)},I=m?m.toStringTag:void 0;var U=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":I&&I in Object(e)?P(e):F(e)};var V=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var k,M=function(e){if(!V(e))return!1;var t=U(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},T=w["__core-js_shared__"],B=(k=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"";var $=function(e){return!!B&&B in e},R=Function.prototype.toString;var D=function(e){if(null!=e){try{return R.call(e)}catch(e){}try{return e+""}catch(e){}}return""},N=/^\[object .+?Constructor\]$/,C=Function.prototype,W=Object.prototype,L=C.toString,q=W.hasOwnProperty,G=RegExp("^"+L.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var H=function(e){return!(!V(e)||$(e))&&(M(e)?G:N).test(D(e))};var J=function(e,t){return null==e?void 0:e[t]};var K=function(e,t){var r=J(e,t);return H(r)?r:void 0},Q=K(w,"Map"),X=K(Object,"create");function Y(){this.__data__=X?X(null):{},this.size=0}function Z(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ee=Object.prototype.hasOwnProperty;function te(e){var t=this.__data__;if(X){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ee.call(t,e)?t[e]:void 0}var re=Object.prototype.hasOwnProperty;function ne(e){var t=this.__data__;return X?void 0!==t[e]:re.call(t,e)}function oe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=X&&void 0===t?"__lodash_hash_undefined__":t,this}function ae(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ae.prototype.clear=Y,ae.prototype.delete=Z,ae.prototype.get=te,ae.prototype.has=ne,ae.prototype.set=oe;var ce=ae;var ie=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var ue=function(e,t){var r=e.__data__;return ie(t)?r["string"==typeof t?"string":"hash"]:r.map};function fe(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t}function se(e){return ue(this,e).get(e)}function le(e){return ue(this,e).has(e)}function ve(e,t){var r=ue(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function pe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pe.prototype.clear=function(){this.size=0,this.__data__={hash:new ce,map:new(Q||s),string:new ce}},pe.prototype.delete=fe,pe.prototype.get=se,pe.prototype.has=le,pe.prototype.set=ve;var be=pe;function de(e,t){var r=this.__data__;if(r instanceof s){var n=r.__data__;if(!Q||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new be(n)}return r.set(e,t),this.size=r.size,this}function he(e){var t=this.__data__=new s(e);this.size=t.size}he.prototype.clear=l,he.prototype.delete=v,he.prototype.get=p,he.prototype.has=y,he.prototype.set=de;var ye=he;var je=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},_e=function(){try{var e=K(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var ge=function(e,t,r){"__proto__"==t&&_e?_e(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},Oe=Object.prototype.hasOwnProperty;var we=function(e,t,r){var n=e[t];Oe.call(e,t)&&o(n,r)&&(void 0!==r||t in e)||ge(e,t,r)};var me=function(e,t,r,n){var o=!r;r=r||{};for(var a=-1,c=t.length;++a<c;){var i=t[a],u=n?n(r[i],e[i],i,r,e):void 0;void 0===u&&(u=e[i]),o?ge(r,i,u):we(r,i,u)}return r};var Ae=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var xe=function(e){return null!=e&&"object"==typeof e};var Se=function(e){return xe(e)&&"[object Arguments]"==U(e)},Ee=Object.prototype,Pe=Ee.hasOwnProperty,ze=Ee.propertyIsEnumerable,Fe=Se(function(){return arguments}())?Se:function(e){return xe(e)&&Pe.call(e,"callee")&&!ze.call(e,"callee")},Ie=Array.isArray;function Ue(){return!1}var Ve=_(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?w.Buffer:void 0,a=(o?o.isBuffer:void 0)||Ue;e.exports=a}),ke=/^(?:0|[1-9]\d*)$/;var Me=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&ke.test(e))&&-1<e&&e%1==0&&e<t};var Te=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991},Be={};Be["[object Float32Array]"]=Be["[object Float64Array]"]=Be["[object Int8Array]"]=Be["[object Int16Array]"]=Be["[object Int32Array]"]=Be["[object Uint8Array]"]=Be["[object Uint8ClampedArray]"]=Be["[object Uint16Array]"]=Be["[object Uint32Array]"]=!0,Be["[object Arguments]"]=Be["[object Array]"]=Be["[object ArrayBuffer]"]=Be["[object Boolean]"]=Be["[object DataView]"]=Be["[object Date]"]=Be["[object Error]"]=Be["[object Function]"]=Be["[object Map]"]=Be["[object Number]"]=Be["[object Object]"]=Be["[object RegExp]"]=Be["[object Set]"]=Be["[object String]"]=Be["[object WeakMap]"]=!1;function $e(e){return xe(e)&&Te(e.length)&&!!Be[U(e)]}var Re=function(t){return function(e){return t(e)}},De=_(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&g.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a}),Ne=De&&De.isTypedArray,Ce=Ne?Re(Ne):$e,We=Object.prototype.hasOwnProperty;var Le=function(e,t){var r=Ie(e),n=!r&&Fe(e),o=!r&&!n&&Ve(e),a=!r&&!n&&!o&&Ce(e),c=r||n||o||a,i=c?Ae(e.length,String):[],u=i.length;for(var f in e)!t&&!We.call(e,f)||c&&("length"==f||o&&("offset"==f||"parent"==f)||a&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Me(f,u))||i.push(f);return i},qe=Object.prototype;var Ge=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||qe)};var He=function(t,r){return function(e){return t(r(e))}},Je=He(Object.keys,Object),Ke=Object.prototype.hasOwnProperty;var Qe=function(e){if(!Ge(e))return Je(e);var t=[];for(var r in Object(e))Ke.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Xe=function(e){return null!=e&&Te(e.length)&&!M(e)};var Ye=function(e){return Xe(e)?Le(e):Qe(e)};var Ze=function(e,t){return e&&me(t,Ye(t),e)};var et=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},tt=Object.prototype.hasOwnProperty;var rt=function(e){if(!V(e))return et(e);var t=Ge(e),r=[];for(var n in e)("constructor"!=n||!t&&tt.call(e,n))&&r.push(n);return r};var nt=function(e){return Xe(e)?Le(e,!0):rt(e)};var ot=function(e,t){return e&&me(t,nt(t),e)},at=_(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?w.Buffer:void 0,a=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}});var ct=function(e,t){var r=-1,n=e.length;for(t=t||Array(n);++r<n;)t[r]=e[r];return t};var it=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var c=e[r];t(c,r,e)&&(a[o++]=c)}return a};function ut(){return[]}var ft=Object.prototype.propertyIsEnumerable,st=Object.getOwnPropertySymbols,lt=st?function(t){return null==t?[]:(t=Object(t),it(st(t),function(e){return ft.call(t,e)}))}:ut;var vt=function(e,t){return me(e,lt(e),t)};var pt=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},bt=He(Object.getPrototypeOf,Object),dt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)pt(t,lt(e)),e=bt(e);return t}:ut;var ht=function(e,t){return me(e,dt(e),t)};var yt=function(e,t,r){var n=t(e);return Ie(e)?n:pt(n,r(e))};var jt=function(e){return yt(e,Ye,lt)};var _t=function(e){return yt(e,nt,dt)},gt=K(w,"DataView"),Ot=K(w,"Promise"),wt=K(w,"Set"),mt=K(w,"WeakMap"),At="[object Map]",xt="[object Promise]",St="[object Set]",Et="[object WeakMap]",Pt="[object DataView]",zt=D(gt),Ft=D(Q),It=D(Ot),Ut=D(wt),Vt=D(mt),kt=U;(gt&&kt(new gt(new ArrayBuffer(1)))!=Pt||Q&&kt(new Q)!=At||Ot&&kt(Ot.resolve())!=xt||wt&&kt(new wt)!=St||mt&&kt(new mt)!=Et)&&(kt=function(e){var t=U(e),r="[object Object]"==t?e.constructor:void 0,n=r?D(r):"";if(n)switch(n){case zt:return Pt;case Ft:return At;case It:return xt;case Ut:return St;case Vt:return Et}return t});var Mt=kt,Tt=Object.prototype.hasOwnProperty;var Bt=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Tt.call(e,"index")&&(r.index=e.index,r.input=e.input),r},$t=w.Uint8Array;var Rt=function(e){var t=new e.constructor(e.byteLength);return new $t(t).set(new $t(e)),t};var Dt=function(e,t){var r=t?Rt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},Nt=/\w*$/;var Ct=function(e){var t=new e.constructor(e.source,Nt.exec(e));return t.lastIndex=e.lastIndex,t},Wt=m?m.prototype:void 0,Lt=Wt?Wt.valueOf:void 0;var qt=function(e){return Lt?Object(Lt.call(e)):{}};var Gt=function(e,t){var r=t?Rt(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var Ht=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return Rt(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return Dt(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Gt(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return Ct(e);case"[object Set]":return new n;case"[object Symbol]":return qt(e)}},Jt=Object.create;function Kt(){}var Qt=function(e){if(!V(e))return{};if(Jt)return Jt(e);Kt.prototype=e;var t=new Kt;return Kt.prototype=void 0,t};var Xt=function(e){return"function"!=typeof e.constructor||Ge(e)?{}:Qt(bt(e))};function Yt(e){return xe(e)&&"[object Map]"==Mt(e)}var Zt=De&&De.isMap,er=Zt?Re(Zt):Yt;function tr(e){return xe(e)&&"[object Set]"==Mt(e)}var rr=De&&De.isSet,nr=rr?Re(rr):tr,or=1,ar=2,cr=4,ir="[object Arguments]",ur="[object Function]",fr="[object GeneratorFunction]",sr="[object Object]",lr={};lr[ir]=lr["[object Array]"]=lr["[object ArrayBuffer]"]=lr["[object DataView]"]=lr["[object Boolean]"]=lr["[object Date]"]=lr["[object Float32Array]"]=lr["[object Float64Array]"]=lr["[object Int8Array]"]=lr["[object Int16Array]"]=lr["[object Int32Array]"]=lr["[object Map]"]=lr["[object Number]"]=lr[sr]=lr["[object RegExp]"]=lr["[object Set]"]=lr["[object String]"]=lr["[object Symbol]"]=lr["[object Uint8Array]"]=lr["[object Uint8ClampedArray]"]=lr["[object Uint16Array]"]=lr["[object Uint32Array]"]=!0,lr["[object Error]"]=lr[ur]=lr["[object WeakMap]"]=!1;var vr=function r(n,o,a,e,t,c){var i,u=o&or,f=o&ar,s=o&cr;if(a&&(i=t?a(n,e,t,c):a(n)),void 0!==i)return i;if(!V(n))return n;var l=Ie(n);if(l){if(i=Bt(n),!u)return ct(n,i)}else{var v=Mt(n),p=v==ur||v==fr;if(Ve(n))return at(n,u);if(v==sr||v==ir||p&&!t){if(i=f||p?{}:Xt(n),!u)return f?ht(n,ot(i,n)):vt(n,Ze(i,n))}else{if(!lr[v])return t?n:{};i=Ht(n,v,u)}}var b=(c=c||new ye).get(n);if(b)return b;c.set(n,i),nr(n)?n.forEach(function(e){i.add(r(e,o,a,e,n,c))}):er(n)&&n.forEach(function(e,t){i.set(t,r(e,o,a,t,n,c))});var d=l?void 0:(s?f?_t:jt:f?nt:Ye)(n);return je(d||n,function(e,t){d&&(e=n[t=e]),we(i,t,r(e,o,a,t,n,c))}),i};function pr(e,o,t){var a=e[0],c=e[1],r=e[2],n=t.changeValue;t.resetFieldState,n(o,a,function(e){var t=e&&e.length?br(e):[];return t.splice(c,0,r),t});var i=br(o.fields),u=new RegExp("^"+h(a)+"\\[(\\d+)\\](.*)");Object.keys(o.fields).sort().reverse().forEach(function(e){var t=u.exec(e);if(t){var r=Number(t[1]);if(c<=r){var n=a+"["+(r+1)+"]"+t[2];d(o,i[e],n)}}})}var br=function(e){return vr(e,5)};function dr(n,o,a,c){Object.keys(c.fields).forEach(function(e){if(e.substring(0,o.length)===o){var t=e.substring(o.length),r=n+"["+a+"]"+t;d(c,c.fields[e],r)}})}function hr(t,r){Object.keys(t.fields).forEach(function(e){t.fields[e]=b({},t.fields[e],{change:t.fields[e].change||r.fields[e]&&r.fields[e].change,blur:t.fields[e].blur||r.fields[e]&&r.fields[e].blur,focus:t.fields[e].focus||r.fields[e]&&r.fields[e].focus}),t.fields[e].change||delete t.fields[e].change,t.fields[e].blur||delete t.fields[e].blur,t.fields[e].focus||delete t.fields[e].focus})}function yr(e,c,t){var r,i=e[0],u=e[1],n=t.changeValue,f=t.renameField,s=t.getIn,l=t.setIn;n(c,i,function(e){var t=[].concat(e||[]);return r=t[u],t.splice(u,1),t});var v=new RegExp("^"+h(i)+"\\[(\\d+)\\](.*)"),p=b({},c,{fields:b({},c.fields)});return Object.keys(c.fields).forEach(function(e){var t=v.exec(e);if(t){var r=Number(t[1]);if(r===u){if(delete c.fields[e],e===i+"["+u+"]"){var n="formState.submitErrors."+i,o=s(c,n);Array.isArray(o)&&(o.splice(u,1),c=l(c,n,o))}}else if(u<r){delete c.fields[e];var a=i+"["+(r-1)+"]"+t[2];p.fields[a]?d(c,p.fields[e],a,p):f(c,e,a)}}}),r}var jr={insert:pr,concat:function(e,t,r){var n=e[0],o=e[1];(0,r.changeValue)(t,n,function(e){return e?[].concat(e,o):o})},move:function(e,t,r){var n=e[0],o=e[1],a=e[2],c=r.changeValue;if(o!==a){c(t,n,function(e){var t=[].concat(e||[]),r=t[o];return t.splice(o,1),t.splice(a,0,r),t});var i=b({},t,{fields:b({},t.fields)});if(dr(n,n+"["+o+"]","tmp",t),o<a)for(var u=o+1;u<=a;u++){dr(n,n+"["+u+"]",""+(u-1),t)}else for(var f=o-1;a<=f;f--){dr(n,n+"["+f+"]",""+(f+1),t)}dr(n,n+"[tmp]",a,t),hr(t,i)}},pop:function(e,t,r){var n,o,a=e[0];if((0,r.changeValue)(t,a,function(e){if(e)return e.length?(o=e.length-1,n=e[o],e.slice(0,o)):[]}),void 0!==o){var c=new RegExp("^"+h(a)+"\\["+o+"].*");Object.keys(t.fields).forEach(function(e){c.test(e)&&delete t.fields[e]})}return n},push:function(e,t,r){var n=e[0],o=e[1];(0,r.changeValue)(t,n,function(e){return e?[].concat(e,[o]):[o]})},remove:yr,removeBatch:function(e,o,t){var a=e[0],c=e[1],r=t.changeValue,i=[].concat(c);i.sort();for(var n=0;n<i.length;n++)0<n&&i[n]===i[n-1]&&i.splice(n--,1);var u=[];r(o,a,function(t){if(u=c.map(function(e){return t&&t[e]}),!t||!i.length)return t;var r=[].concat(t),n=[];return i.forEach(function(e){r.splice(e-n.length,1),n.push(t&&t[e])}),r});var f=new RegExp("^"+h(a)+"\\[(\\d+)\\](.*)"),s=b({},o,{fields:{}});return Object.keys(o.fields).forEach(function(e){var t=f.exec(e);if(t){var r=Number(t[1]);if(!~i.indexOf(r)){var n=a+"["+(r-function(e,r){return e.reduce(function(e,t){return t<r?e+1:e},0)}(i,r))+"]"+t[2];d(s,o.fields[e],n,o)}}else s.fields[e]=o.fields[e]}),o.fields=s.fields,u},shift:function(e,t,r){var n=e[0];return yr([n,0],t,r)},swap:function(e,t,r){var n=e[0],o=e[1],a=e[2],c=r.changeValue;if(o!==a){c(t,n,function(e){var t=[].concat(e||[]),r=t[o];return t[o]=t[a],t[a]=r,t});var i=b({},t,{fields:b({},t.fields)}),u=n+"["+a+"]",f=n+"[tmp]";dr(n,n+"["+o+"]","tmp",t),dr(n,u,o,t),dr(n,f,a,t),hr(t,i)}},unshift:function(e,t,r){var n=e[0],o=e[1];return pr([n,0,o],t,r)},update:function(e,t,r){var n=e[0],o=e[1],a=e[2];(0,r.changeValue)(t,n,function(e){var t=[].concat(e||[]);return t.splice(o,1,a),t})},unshiftNew:function(e,t,r){var n=e[0],o=e[1];(0,r.changeValue)(t,n,function(e){return e?[].concat(e.reverse(),[o]).reverse():[o]})}};e.default=jr,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=final-form-arrays.umd.min.js.map
